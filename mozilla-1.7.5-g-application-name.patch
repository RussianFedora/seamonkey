Index: xpfe/bootstrap/nsAppRunner.cpp
===================================================================
RCS file: /cvsroot/mozilla/xpfe/bootstrap/Attic/nsAppRunner.cpp,v
retrieving revision 1.442.2.12
diff -d -u -p -r1.442.2.12 nsAppRunner.cpp
--- xpfe/bootstrap/nsAppRunner.cpp	31 Dec 2007 22:37:36 -0000	1.442.2.12
+++ xpfe/bootstrap/nsAppRunner.cpp	8 Oct 2008 17:55:53 -0000
@@ -1573,6 +1573,11 @@ public:
 };
 #endif
 
+#ifdef MOZ_WIDGET_GTK2
+#include "prlink.h"
+typedef void (*_g_set_application_name_fn)(const gchar *application_name);
+#endif
+
 int main(int argc, char* argv[])
 {
 #ifdef XP_WIN32
@@ -1685,6 +1690,19 @@ int main(int argc, char* argv[])
 #endif
   gtk_init(&argc, &argv);
 
+#if defined(MOZ_WIDGET_GTK2)
+  // g_set_application_name () is only defined in glib2.2 and higher.
+  PRLibrary *glib2;
+  _g_set_application_name_fn _g_set_application_name =
+      (_g_set_application_name_fn)PR_FindFunctionSymbolAndLibrary("g_set_application_name", &glib2);
+  if (_g_set_application_name) {
+    _g_set_application_name("seamonkey"); /* MOZ_APP_NAME */
+  }
+  if (glib2) {
+    PR_UnloadLibrary(glib2);
+  }
+#endif
+
   gtk_widget_set_default_visual(gdk_rgb_get_visual());
   gtk_widget_set_default_colormap(gdk_rgb_get_cmap());
 #endif /* MOZ_WIDGET_GTK || MOZ_WIDGET_GTK2 */
